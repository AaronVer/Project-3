# Startup
Welcome to my opinionated CacheMoney Startup guide! This document contains general guidelines and things to note about the project. Keep in mind that we are a group of programmers who each has their own style of writing code, so do **not** expect consistent coding styles throughout the source code.



## Frontend
Make sure you have Node Package Manager (npm) installed. Any related commands should be run in the `frontend` directory, or any of its child directories.

### First-Time Run:
 - Run `npm install` to set up node packages.
 - Run `npm start` to start the locally hosted frontend.

### Standard Run:
**NOTE**: `npm install` should be performed if any new packages were installed.

- Run `npm start` to start the locally hosted frontend.

### Remote Building Guide for Frontend
The frontend is not deployed automatically. I would recommend pursuing `npm run deploy` as a method to do this more efficiently, but due to time constraints I was unable to.

 - Create a local directory (hereby referred to as pretend bucket) that will contain stuff in your remote bucket.
 - Sync the remote bucket to your pretend bucket.
   - `aws s3 sync s3://bucket-name-here \bucket\path\goes\here`
 - Build the frontend.
   - `npm run build`
 - Copy contents of generated `/build` directly into your pretend bucket.
 - *Optional*: Delete old build & source artifacts generated by your DevOps pipeline from your pretend bucket.
 - Forcefully sync your pretend bucket to the remote bucket by deleting any files not in your pretend bucket. **WARNING**: You may delete something important if you are not careful. This is why we sync the remote bucket to the pretend bucket first.
   - `aws s3 sync \bucket\path\goes\here s3://bucket-name-here --delete`



## Backend
Simply build & run with the IDE of your choice. Make sure `application.properties` is located under the `resources` directory (alongside `logback-spring.xml`.)

### Dependencies
Refer to pom.xml.

### Project Lombok
Project Lombok contains tons of helpful annotations to trim down on boilerplate code written. The two most notable annotations used in our model classes were `@Getter` & `@Setter` to automatically generate getters and setters for any of the model's fields automatically.

I would strongly encourage looking more into available Lombok annotations to help cut down on future code as well, but Lombok annotations are by no means required.

### application.properties
Most of the auto-provided Spring Boot properties are used:
 - `spring.datasource.url`
   - URL of the remote database
 - `spring.datasource.username`
   - username for the remote database
 - `spring.datasource.password`
   - password for the remote database
 - `spring.datasource.driver-class-name=org.postgressql.Driver`
   - underlying SQL being used
 - `spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect`
   - tied to underlying SQL being used
 - `spring.jpa.generate-ddl=true`
   - lets Spring take care of your database structure
   - **NOTE**: use the proper annotations or this will not work!
 - `spring.jpa.hibernate.ddl-auto`
   - `create` mode recommended when models will change regularly
   - `update` mode recommended when models will **NOT** change regularly

Some additional properties that were included as the need arose:
 - `spring.jpa.open-in-view=true`
   - clears a warning from Spring (not entirely sure this is necessary otherwise)
 - `spring.jackson.serialization.fail-on-empty-beans=false`
   - band-aid for some Hibernate issues
   - **NOTE**: strongly recommend looking into the problem behind this and fixing it
 - `jwt.token.secret`
   - an unofficial property, but one ***NECESSARY*** for most of the controller endpoints to work
   - should be set equal to some assortment of letters and numbers
     - the recommended strategy for generating this should be having a cat walk on your keyboard or simply rolling your face across your keyboard until you are content

### Remote Building Guide for Backend
Pull changes into the `devops` branch.

**NOTE**: Ensure the correct `application.properties` is in your S3 Bucket under `/resources`!



## Devops
The `devops` branch contains the `buildspec.yml` file for building the project through various AWS services:
 - CodePipeline
 - CodeBuild
 - Elastic Beanstalk (+ EC2)
 - S3 Bucket

More information regarding building remotely can be found under [Frontend](#remote-building-guide-for-frontend) & [Backend](#remote-building-guide-for-backend).

**NOTE**: I have no idea if you will have access to the same DevOps setup we used. If you do, great! If not, then as DevOps lead I wish you luck in your endeaver to figure out how DevOps works. My only advice is to look at the logs and ask questions.
